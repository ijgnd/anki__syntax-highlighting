For the original add-on <a href="https://ankiweb.net/shared/info/1463041493" rel="nofollow">Syntax Highlighting for Code</a> click <a href="https://ankiweb.net/shared/info/1463041493" rel="nofollow">here</a>.

<b>This add-on is a fork (modified version). My version has several improvements, mainly better night mode compatibility and a different user interface which I think is more flexible to use and easier to setup.</b> You can e.g. 
- ... quickly filter all available styles.
- ... easily make your syntax highlighting compatible with night mode : Just check two boxes in the configuration dialog (use CSS and update templates). With the original you need to install a different add-on, copy a file to your media folder and adjust all your templates manually. This only works if the style you use is suited to the night mode. Only the default layout is adjusted to the anki nightmode. I haven't tested other layouts.
- ... paste code as inline code wrapped in a "&lt; code &gt;" tag. To use this press "win/meta" while selecting your action from the menu. This feature mostly works which is enough for me.
- ... paste code unformatted from the menu which I prefer over additional shortcuts I would have to remember for the SupplementaryMiniFormatPack. Actually I reused the relevant code from this add-on for mine.
- ... easily configure a custom font for the snippets
- ... when in the editor you can override your default settings with modifier keys. e.g. You just opened the language selection menu with "Alt+s" in the editor. Then use the cursor to select the relevant language. Before you press "Return" hold down "Alt" and only release it after you have pressed "Return". "Alt" means you get inline styling and you can set a custom style even though in general you use css. "Shift" toggles the default setting for line numbers for this one time and "Control" toggles your setting for centering for this one time.

Use my version at your own risk! This add-on works well for me but as a prudent user you have backups ...

<img src="https://raw.githubusercontent.com/ijgnd/syntax-highlighting/master/screenshots/1.png"> 

<a href="https://raw.githubusercontent.com/ijgnd/syntax-highlighting/master/screenshots/syntax_highlight_fork.gif" rel="nofollow">Here</a> is a screencast about the initial setup and use.

<b># technical changes</b>
Apart from the different UI I made these changes:
- For centering I no longer use the <a href="https://developer.mozilla.org/de/docs/Web/HTML/Element/center" rel="nofollow">deprecated</a> "&lt;center&gt;" tag. Instead I use "margin: 0 auto;". 
- When no css is used I also add "text-align: left;" to the table style so that I can override the setting "text-align: center" from the .card class. This isn't necessary when you use "&lt;center&gt;".
- When no css is used pygments still applies the classes "highlight", "tablehighlight", "linenodiv". This means that this snippet will still get styled if you have set some css for these classes. That's why I remove them.
- When no css is used and you use line numbers pygments will add a bright background colors to the line numbers. When using night-mode you'll have white text on this unchanged white background. That's why I set the background for the linenumbers column to transparent if no css is used. 
- For inserting the html I don't use "inserthtml" because this strips inline styling when it matches the css styling. In the editor text-align is set to left. When I use "inserthtml" this removes the inline style "text-align: left;" from a tag. When I review and use "text-align: center" this will be a problem. So I switched to a custom html insertion function. 
For the styling related changes I use bs4.

<b># bugs etc.</b>
Please do not use reviews for bug reports or support requests. I don't get notified of your reviews, and properly troubleshooting an issue through them is nearly impossible (formatting is limited and I can't reply multiple times). If you find a bug let me know on <a href="https://github.com/ijgnd/syntax-highlighting" rel="nofollow">github</a> or via reddit (/u/ijgnord). 

When you use the css option and the code doesn't look like expected: Make sure to check if the styling section of your card template starts with the line '@import url("_styles_for_syntax_highlighting.css");'. Then check if you have the file "_styles_for_syntax_highlighting.css" in your media folder and if it contains the css styles you want.

<b># Versions</b>
- 2020-04-27 small improvements for the filter dialog: remember size, etc.
- 2020-03-24 pygments 2.6.1, night-mode fix in settings, reset font option in settings, remove leading spaces if possible (code by hakakou), 
- 2020-01-03 handle non-existent lang names
- 2019-12-28 Pygments 2.5.2, fix for "sometimes no text was pasted"
- 2019-11-19 multiple fixes, improve inline code function, postprocess with bs4
- 2019-10-18 initial release

<b># Credits and License</b>
see the file<a href="https://github.com/ijgnd/anki__syntax-highlighting/blob/master/src/__init__.py" rel="nofollow">__init__.py</a> of this add-on.

I didn't make a pull request to the original repo because my version is different and maybe some people prefer the old menu in the buttons bar and because my code doesn't adhere to the <a href="https://github.com/glutanimate/docs/blob/master/anki/add-ons/CONTRIBUTING.md#how-to-contribute-to-my-anki-add-ons" rel="nofollow">guidelines for contributions the current maintainer glutanimate has published in 2020-04</a>.
